<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TaroMeet - AI 情感陪伴助手</title>

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#8b5cf6">
    <meta name="description"
        content="TaroMeet - AI emotional companion for mood tracking, love advice, and tarot readings">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="TaroMeet">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-72.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/icon-192.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152.png">
    <link rel="apple-touch-icon" sizes="144x144" href="icons/icon-144.png">
    <link rel="apple-touch-icon" sizes="120x120" href="icons/icon-128.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">

    <!-- Service Worker disabled for now -->
    <script>
        // Service worker disabled to avoid caching issues
        console.log('TaroMeet v2.1 loaded');
    </script>
</head>


<body>
    <div id="app">
        <!-- Splash Screen -->
        <div id="splash-screen" class="screen active">
            <div class="splash-content">
                <div class="logo-container">
                    <div class="moon-glow"></div>
                    <div class="logo">🌙</div>
                </div>
                <h1 class="app-title">TaroMeet <span style="font-size: 12px; opacity: 0.7;">v2.0</span></h1>
                <p class="tagline" data-i18n="appTagline">AI 情感陪伴助手 (最新版)</p>
                <div class="loading-dots">
                    <span></span><span></span><span></span>
                </div>
            </div>
        </div>

        <!-- Login Screen -->
        <div id="login-screen" class="screen">
            <div class="auth-container">
                <div class="auth-header">
                    <div class="logo-small">🌙</div>
                    <h2 data-i18n="welcomeBack">欢迎回来</h2>
                    <p data-i18n="loginSubtitle">登录您的 TaroMeet 账户</p>
                </div>
                <form id="login-form" class="auth-form">
                    <div class="input-group">
                        <span class="input-icon">📧</span>
                        <input type="email" id="login-email" placeholder="邮箱地址" required>
                    </div>
                    <div class="input-group">
                        <span class="input-icon">🔒</span>
                        <input type="password" id="login-password" placeholder="密码" required>
                    </div>
                    <button type="submit" class="btn-primary" data-i18n="login">登录</button>
                </form>
                <p class="auth-switch">
                    <span data-i18n="noAccount">还没有账户？</span><a href="#" onclick="showScreen('register-screen')"
                        data-i18n="registerNow">立即注册</a>
                </p>
            </div>
        </div>

        <!-- Register Screen -->
        <div id="register-screen" class="screen">
            <div class="auth-container">
                <div class="auth-header">
                    <div class="logo-small">🌙</div>
                    <h2 data-i18n="createAccount">创建账户</h2>
                    <p data-i18n="registerSubtitle">开始您的心灵之旅</p>
                </div>
                <form id="register-form" class="auth-form">
                    <div class="input-group">
                        <span class="input-icon">👤</span>
                        <input type="text" id="register-username" placeholder="用户名" required>
                    </div>
                    <div class="input-group">
                        <span class="input-icon">📧</span>
                        <input type="email" id="register-email" placeholder="邮箱地址" required>
                    </div>
                    <div class="input-group">
                        <span class="input-icon">🔒</span>
                        <input type="password" id="register-password" placeholder="密码" required>
                    </div>
                    <button type="submit" class="btn-primary" data-i18n="register">注册</button>
                </form>
                <p class="auth-switch">
                    <span data-i18n="haveAccount">已有账户？</span><a href="#" onclick="showScreen('login-screen')"
                        data-i18n="loginNow">立即登录</a>
                </p>
            </div>
        </div>

        <!-- Home Screen -->
        <div id="home-screen" class="screen">
            <div class="home-header">
                <div class="user-greeting">
                    <span class="greeting-text">晚上好</span>
                    <span class="user-name" id="home-username">用户</span>
                </div>
                <div class="header-actions">
                    <button class="btn-icon" onclick="showScreen('settings-screen')">⚙️</button>
                </div>
            </div>

            <div class="home-content">
                <div class="daily-quote glass-card">
                    <div class="quote-icon">✨</div>
                    <p class="quote-text">每一天都是新的开始，相信自己，你值得被爱。</p>
                </div>

                <h3 class="section-title">探索功能</h3>

                <div class="feature-grid">
                    <div class="feature-card mood-card" onclick="showScreen('mood-screen')">
                        <div class="feature-icon">💝</div>
                        <div class="feature-info">
                            <h4>心情助理</h4>
                            <p>AI 倾听你的心声</p>
                        </div>
                        <span class="feature-arrow">→</span>
                    </div>

                    <div class="feature-card love-card" onclick="showScreen('love-screen')">
                        <div class="feature-icon">💕</div>
                        <div class="feature-info">
                            <h4>恋爱教练</h4>
                            <p>提升你的魅力值</p>
                        </div>
                        <span class="feature-arrow">→</span>
                    </div>

                    <div class="feature-card diary-card" onclick="showScreen('diary-screen')">
                        <div class="feature-icon">📝</div>
                        <div class="feature-info">
                            <h4>反省日记</h4>
                            <p>每日自我成长</p>
                        </div>
                        <span class="feature-arrow">→</span>
                    </div>

                    <div class="feature-card voice-card" onclick="showScreen('voice-screen')">
                        <div class="feature-icon">🎙️</div>
                        <div class="feature-info">
                            <h4>语音陪伴</h4>
                            <p>有人陪你聊天</p>
                        </div>
                        <span class="feature-arrow">→</span>
                    </div>

                    <div class="feature-card tarot-card" onclick="showScreen('tarot-screen')">
                        <div class="feature-icon">🔮</div>
                        <div class="feature-info">
                            <h4>塔罗占卜</h4>
                            <p>探索命运指引</p>
                        </div>
                        <span class="feature-arrow">→</span>
                    </div>
                </div>

                <div class="premium-banner glass-card" onclick="showScreen('premium-screen')">
                    <div class="premium-icon">👑</div>
                    <div class="premium-text">
                        <h4>解锁无限 AI 对话</h4>
                        <p>每月仅需 RM 19.90</p>
                    </div>
                    <span class="premium-arrow">→</span>
                </div>
            </div>

            <nav class="bottom-nav">
                <button class="nav-item active" data-screen="home-screen">
                    <span class="nav-icon">🏠</span>
                    <span class="nav-label">首页</span>
                </button>
                <button class="nav-item" data-screen="mood-screen">
                    <span class="nav-icon">💝</span>
                    <span class="nav-label">心情</span>
                </button>
                <button class="nav-item" data-screen="tarot-screen">
                    <span class="nav-icon">🔮</span>
                    <span class="nav-label">塔罗</span>
                </button>
                <button class="nav-item" data-screen="settings-screen">
                    <span class="nav-icon">👤</span>
                    <span class="nav-label">我的</span>
                </button>
            </nav>
        </div>

        <!-- Mood Screen -->
        <div id="mood-screen" class="screen">
            <div class="page-header">
                <button class="back-btn" onclick="showScreen('home-screen')">←</button>
                <h2>AI 心情助理</h2>
                <div class="header-spacer"></div>
            </div>

            <div class="page-content">
                <div class="mood-intro glass-card">
                    <p>💝 告诉我你现在的心情，我会给你温暖的回应</p>
                </div>

                <div class="mood-emojis">
                    <button class="emoji-btn" data-mood="开心">😊</button>
                    <button class="emoji-btn" data-mood="平静">😌</button>
                    <button class="emoji-btn" data-mood="疲惫">😔</button>
                    <button class="emoji-btn" data-mood="焦虑">😰</button>
                    <button class="emoji-btn" data-mood="悲伤">😢</button>
                </div>

                <div class="input-area">
                    <textarea id="mood-input" placeholder="写下你此刻的心情..." rows="4"></textarea>
                    <button class="btn-primary btn-send" onclick="analyzeMood()">
                        <span>发送给 AI</span>
                        <span class="btn-icon-right">✨</span>
                    </button>
                </div>

                <div id="mood-response" class="ai-response glass-card hidden">
                    <div class="response-header">
                        <span class="ai-avatar">🌙</span>
                        <span class="ai-name">TaroMeet AI</span>
                    </div>
                    <div class="response-emoji" id="mood-emoji"></div>
                    <div class="response-content" id="mood-encouragement"></div>
                    <div class="response-suggestion" id="mood-suggestion"></div>
                </div>
            </div>
        </div>

        <!-- Love Coach Screen -->
        <div id="love-screen" class="screen">
            <div class="page-header">
                <button class="back-btn" onclick="showScreen('home-screen')">←</button>
                <h2>AI 恋爱教练</h2>
                <div class="header-spacer"></div>
            </div>

            <div class="page-content">
                <div class="love-intro glass-card">
                    <p>💕 粘贴你们的聊天记录，我帮你分析如何回复更合适</p>
                </div>

                <div class="input-area">
                    <textarea id="love-input" placeholder="粘贴聊天记录在这里...

例如：
对方：今天好累啊
我：是吗
对方：嗯..." rows="8"></textarea>
                    <button class="btn-primary btn-send" onclick="analyzeLove()">
                        <span>分析聊天</span>
                        <span class="btn-icon-right">💕</span>
                    </button>
                </div>

                <div id="love-response" class="ai-response glass-card hidden">
                    <div class="response-header">
                        <span class="ai-avatar">💘</span>
                        <span class="ai-name">恋爱教练</span>
                    </div>

                    <div class="affection-meter">
                        <span class="meter-label">好感度预估</span>
                        <div class="meter-bar">
                            <div class="meter-fill" id="affection-fill"></div>
                        </div>
                        <span class="meter-value" id="affection-value">0%</span>
                    </div>

                    <div class="response-section">
                        <h4>📊 对话分析</h4>
                        <p id="love-analysis"></p>
                    </div>

                    <div class="response-section">
                        <h4>💬 建议回复</h4>
                        <div id="love-suggestions" class="suggestions-list"></div>
                    </div>

                    <div class="response-section">
                        <h4>💡 提升技巧</h4>
                        <p id="love-tips"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Diary Screen -->
        <div id="diary-screen" class="screen">
            <div class="page-header">
                <button class="back-btn" onclick="showScreen('home-screen')">←</button>
                <h2>AI 反省日记</h2>
                <div class="header-spacer"></div>
            </div>

            <div class="page-content">
                <div class="diary-intro glass-card">
                    <p>📝 每天一句话，AI 帮你进行深度自我反省</p>
                </div>

                <div class="diary-prompt glass-card">
                    <p class="prompt-text">今天最让你印象深刻的一件事是什么？</p>
                </div>

                <div class="input-area">
                    <textarea id="diary-input" placeholder="写下你今天的感悟..." rows="4"></textarea>
                    <button class="btn-primary btn-send" onclick="reflectDiary()">
                        <span>开始反省</span>
                        <span class="btn-icon-right">🌱</span>
                    </button>
                </div>

                <div id="diary-response" class="ai-response glass-card hidden">
                    <div class="response-header">
                        <span class="ai-avatar">🌿</span>
                        <span class="ai-name">成长顾问</span>
                    </div>

                    <div class="growth-meter">
                        <span class="meter-label">成长指数</span>
                        <div class="meter-bar growth">
                            <div class="meter-fill" id="growth-fill"></div>
                        </div>
                        <span class="meter-value" id="growth-value">0%</span>
                    </div>

                    <div class="response-section">
                        <h4>🪞 深度反思</h4>
                        <p id="diary-reflection"></p>
                    </div>

                    <div class="response-section">
                        <h4>🌱 成长洞察</h4>
                        <p id="diary-insight"></p>
                    </div>

                    <div class="response-section tomorrow-card">
                        <h4>🌅 明日一件事</h4>
                        <p id="diary-tomorrow"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Voice Screen -->
        <div id="voice-screen" class="screen">
            <div class="page-header">
                <button class="back-btn" onclick="showScreen('home-screen')">←</button>
                <h2>语音陪伴</h2>
                <div class="header-spacer"></div>
            </div>

            <div class="page-content voice-content">
                <div class="voice-avatar-container">
                    <div class="voice-glow"></div>
                    <div class="voice-avatar">
                        <span>🌙</span>
                    </div>
                    <p class="voice-name">小塔</p>
                    <p class="voice-status">在线陪伴中</p>
                </div>

                <div id="voice-messages" class="voice-messages">
                    <div class="message ai-message">
                        <span class="message-avatar">🌙</span>
                        <div class="message-bubble">
                            <p>你好呀～我是小塔，今天想聊些什么呢？无论开心还是难过，我都在这里陪你。</p>
                        </div>
                    </div>
                </div>

                <div class="voice-input-area">
                    <input type="text" id="voice-input" placeholder="输入消息..." onkeypress="handleVoiceEnter(event)">
                    <button class="btn-send-voice" onclick="sendVoiceMessage()">
                        <span>发送</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Tarot Screen -->
        <div id="tarot-screen" class="screen">
            <div class="page-header">
                <button class="back-btn" onclick="showScreen('home-screen')">←</button>
                <h2>塔罗占卜</h2>
                <div class="header-spacer"></div>
            </div>

            <div class="page-content tarot-content">
                <div class="tarot-intro glass-card">
                    <p>🔮 静心冥想，让塔罗牌为你揭示命运的指引</p>
                </div>

                <div class="input-area">
                    <input type="text" id="tarot-question" placeholder="心中默念你的问题（可选）">
                </div>

                <div id="tarot-deck" class="tarot-deck">
                    <div class="deck-instruction">
                        <p>点击下方开始抽牌</p>
                    </div>
                    <button class="btn-primary btn-draw" onclick="drawTarot()">
                        <span>开始占卜</span>
                        <span class="btn-icon-right">🔮</span>
                    </button>
                </div>

                <div id="tarot-result" class="tarot-result hidden">
                    <div class="drawn-cards" id="drawn-cards"></div>

                    <div class="interpretation glass-card">
                        <div class="response-header">
                            <span class="ai-avatar">🔮</span>
                            <span class="ai-name">塔罗占卜师</span>
                        </div>
                        <div class="interpretation-text" id="tarot-interpretation"></div>
                    </div>

                    <button class="btn-secondary" onclick="resetTarot()">重新占卜</button>
                </div>
            </div>
        </div>

        <!-- Settings Screen -->
        <div id="settings-screen" class="screen">
            <div class="page-header">
                <button class="back-btn" onclick="showScreen('home-screen')">←</button>
                <h2>个人中心</h2>
                <div class="header-spacer"></div>
            </div>

            <div class="page-content">
                <div class="profile-card glass-card">
                    <div class="profile-avatar">👤</div>
                    <div class="profile-info">
                        <h3 id="settings-username">用户</h3>
                        <p id="settings-email">user@example.com</p>
                        <span class="membership-badge free">免费版</span>
                    </div>
                </div>

                <div class="usage-card glass-card">
                    <h4>今日使用情况</h4>
                    <div class="usage-item">
                        <span class="usage-label">AI 对话</span>
                        <div class="usage-bar">
                            <div class="usage-fill" style="width: 60%"></div>
                        </div>
                        <span class="usage-value">3/5</span>
                    </div>
                    <div class="usage-item">
                        <span class="usage-label">塔罗占卜</span>
                        <div class="usage-bar">
                            <div class="usage-fill" style="width: 100%"></div>
                        </div>
                        <span class="usage-value">1/1</span>
                    </div>
                </div>

                <div class="settings-menu">
                    <!-- Theme Toggle -->
                    <div class="settings-item toggle-item">
                        <span class="settings-icon">🌙</span>
                        <span class="settings-label" data-i18n="darkMode">深色模式</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="theme-toggle" onchange="toggleTheme()">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <!-- Language Selector -->
                    <div class="settings-item toggle-item">
                        <span class="settings-icon">🌐</span>
                        <span class="settings-label" data-i18n="language">语言</span>
                        <select id="language-select" class="language-select" onchange="changeLanguage(this.value)">
                            <option value="zh">中文</option>
                            <option value="en">English</option>
                        </select>
                    </div>

                    <button class="settings-item" onclick="showScreen('premium-screen')">
                        <span class="settings-icon">👑</span>
                        <span class="settings-label" data-i18n="upgradePremium">升级会员</span>
                        <span class="settings-arrow">→</span>
                    </button>
                    <button class="settings-item" onclick="showScreen('emotion-report-screen')">
                        <span class="settings-icon">📊</span>
                        <span class="settings-label" data-i18n="emotionReport">情绪报告</span>
                        <span class="settings-arrow">→</span>
                    </button>
                    <button class="settings-item" onclick="showScreen('notification-screen')">
                        <span class="settings-icon">🔔</span>
                        <span class="settings-label" data-i18n="notifications">通知设置</span>
                        <span class="settings-arrow">→</span>
                    </button>
                    <button class="settings-item" onclick="showScreen('help-screen')">
                        <span class="settings-icon">❓</span>
                        <span class="settings-label" data-i18n="helpCenter">帮助中心</span>
                        <span class="settings-arrow">→</span>
                    </button>
                    <button class="settings-item logout" onclick="logout()">
                        <span class="settings-icon">🚪</span>
                        <span class="settings-label" data-i18n="logout">退出登录</span>
                        <span class="settings-arrow">→</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Premium Screen -->
        <div id="premium-screen" class="screen">
            <div class="page-header">
                <button class="back-btn" onclick="showScreen('settings-screen')">←</button>
                <h2>升级会员</h2>
                <div class="header-spacer"></div>
            </div>

            <div class="page-content premium-content">
                <div class="premium-hero">
                    <div class="crown-icon">👑</div>
                    <h2>TaroMeet Premium</h2>
                    <p>解锁全部 AI 功能</p>
                </div>

                <div class="premium-features">
                    <div class="premium-feature">
                        <span class="feature-check">✓</span>
                        <span>无限 AI 对话次数</span>
                    </div>
                    <div class="premium-feature">
                        <span class="feature-check">✓</span>
                        <span>无限语音陪伴时长</span>
                    </div>
                    <div class="premium-feature">
                        <span class="feature-check">✓</span>
                        <span>每日 10 次塔罗占卜</span>
                    </div>
                    <div class="premium-feature">
                        <span class="feature-check">✓</span>
                        <span>完整历史记录</span>
                    </div>
                    <div class="premium-feature">
                        <span class="feature-check">✓</span>
                        <span>高级情绪分析报告</span>
                    </div>
                </div>

                <div class="pricing-card glass-card">
                    <div class="price">
                        <span class="currency">RM</span>
                        <span class="amount">19.90</span>
                        <span class="period">/月</span>
                    </div>
                    <button class="btn-premium" onclick="showFPXPayment()">立即订阅</button>
                    <p class="pricing-note">随时可取消，无风险</p>
                </div>
            </div>
        </div>

        <!-- Emotion Report Screen -->
        <div id="emotion-report-screen" class="screen">
            <div class="page-header">
                <button class="back-btn" onclick="showScreen('settings-screen')">←</button>
                <h2>情绪报告</h2>
                <div class="header-spacer"></div>
            </div>
            <div class="page-content">
                <div class="report-summary glass-card">
                    <h3>本周情绪概览</h3>
                    <div class="emotion-chart">
                        <div class="chart-bars">
                            <div class="chart-bar" style="height: 60%"><span>周一</span></div>
                            <div class="chart-bar" style="height: 80%"><span>周二</span></div>
                            <div class="chart-bar" style="height: 45%"><span>周三</span></div>
                            <div class="chart-bar" style="height: 90%"><span>周四</span></div>
                            <div class="chart-bar" style="height: 70%"><span>周五</span></div>
                            <div class="chart-bar" style="height: 85%"><span>周六</span></div>
                            <div class="chart-bar active" style="height: 75%"><span>今天</span></div>
                        </div>
                    </div>
                </div>
                <div class="emotion-stats">
                    <div class="stat-card glass-card">
                        <span class="stat-emoji">😊</span>
                        <span class="stat-label">开心</span>
                        <span class="stat-value">45%</span>
                    </div>
                    <div class="stat-card glass-card">
                        <span class="stat-emoji">😌</span>
                        <span class="stat-label">平静</span>
                        <span class="stat-value">30%</span>
                    </div>
                    <div class="stat-card glass-card">
                        <span class="stat-emoji">😔</span>
                        <span class="stat-label">低落</span>
                        <span class="stat-value">15%</span>
                    </div>
                    <div class="stat-card glass-card">
                        <span class="stat-emoji">😰</span>
                        <span class="stat-label">焦虑</span>
                        <span class="stat-value">10%</span>
                    </div>
                </div>
                <div class="insight-card glass-card">
                    <h4>💡 AI 洞察</h4>
                    <p>这周你的情绪整体稳定，周四达到了最佳状态！建议继续保持良好的作息和社交活动。</p>
                </div>
            </div>
        </div>

        <!-- Notification Settings Screen -->
        <div id="notification-screen" class="screen">
            <div class="page-header">
                <button class="back-btn" onclick="showScreen('settings-screen')">←</button>
                <h2>通知设置</h2>
                <div class="header-spacer"></div>
            </div>
            <div class="page-content">
                <div class="notification-options">
                    <div class="notification-item glass-card">
                        <div class="notification-info">
                            <span class="notification-icon">💝</span>
                            <div>
                                <h4>每日心情提醒</h4>
                                <p>每天提醒你记录心情</p>
                            </div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="mood-notify" checked onchange="saveNotificationSettings()">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="notification-item glass-card">
                        <div class="notification-info">
                            <span class="notification-icon">🔮</span>
                            <div>
                                <h4>每日塔罗提醒</h4>
                                <p>每天提醒你进行塔罗占卜</p>
                            </div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="tarot-notify" onchange="saveNotificationSettings()">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="notification-item glass-card">
                        <div class="notification-info">
                            <span class="notification-icon">📝</span>
                            <div>
                                <h4>睡前日记提醒</h4>
                                <p>晚上10点提醒你写反省日记</p>
                            </div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="diary-notify" checked onchange="saveNotificationSettings()">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="notification-item glass-card">
                        <div class="notification-info">
                            <span class="notification-icon">🎉</span>
                            <div>
                                <h4>优惠活动通知</h4>
                                <p>接收会员优惠和活动信息</p>
                            </div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="promo-notify" onchange="saveNotificationSettings()">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Help Center Screen -->
        <div id="help-screen" class="screen">
            <div class="page-header">
                <button class="back-btn" onclick="showScreen('settings-screen')">←</button>
                <h2>帮助中心</h2>
                <div class="header-spacer"></div>
            </div>
            <div class="page-content">
                <div class="faq-list">
                    <div class="faq-item glass-card" onclick="toggleFaq(this)">
                        <div class="faq-question">
                            <span>如何使用 AI 心情助理？</span>
                            <span class="faq-arrow">↓</span>
                        </div>
                        <div class="faq-answer">
                            <p>进入心情助理页面，选择当前心情的表情，然后在输入框中描述你的感受，AI 会给你温暖的回应和建议。</p>
                        </div>
                    </div>
                    <div class="faq-item glass-card" onclick="toggleFaq(this)">
                        <div class="faq-question">
                            <span>会员有什么特权？</span>
                            <span class="faq-arrow">↓</span>
                        </div>
                        <div class="faq-answer">
                            <p>会员可享受无限 AI 对话、无限语音陪伴、每日10次塔罗占卜、完整历史记录和高级情绪分析报告。</p>
                        </div>
                    </div>
                    <div class="faq-item glass-card" onclick="toggleFaq(this)">
                        <div class="faq-question">
                            <span>如何取消订阅？</span>
                            <span class="faq-arrow">↓</span>
                        </div>
                        <div class="faq-answer">
                            <p>您可以随时在个人中心取消订阅，取消后将在当前计费周期结束后停止收费。</p>
                        </div>
                    </div>
                    <div class="faq-item glass-card" onclick="toggleFaq(this)">
                        <div class="faq-question">
                            <span>我的数据安全吗？</span>
                            <span class="faq-arrow">↓</span>
                        </div>
                        <div class="faq-answer">
                            <p>是的，我们使用加密技术保护您的所有数据。您的隐私对我们非常重要，我们不会将您的数据分享给第三方。</p>
                        </div>
                    </div>
                    <div class="faq-item glass-card" onclick="toggleFaq(this)">
                        <div class="faq-question">
                            <span>如何联系客服？</span>
                            <span class="faq-arrow">↓</span>
                        </div>
                        <div class="faq-answer">
                            <p>您可以发送邮件至 support@taromeet.com，我们会在24小时内回复您的问题。</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bank Transfer Payment Modal -->
        <div id="fpx-modal" class="modal hidden">
            <div class="modal-overlay" onclick="closeFPXModal()"></div>
            <div class="modal-content glass-card">
                <div class="modal-header">
                    <h3>银行转账支付</h3>
                    <button class="close-btn" onclick="closeFPXModal()">✕</button>
                </div>

                <div class="payment-steps">
                    <div class="step-indicator">
                        <span class="step active" id="step1">1</span>
                        <span class="step-line"></span>
                        <span class="step" id="step2">2</span>
                        <span class="step-line"></span>
                        <span class="step" id="step3">3</span>
                    </div>
                </div>

                <!-- Step 1: Bank Details -->
                <div id="payment-step1" class="payment-step">
                    <div class="bank-details-card">
                        <h4>请转账到以下账户：</h4>
                        <div class="bank-info-row">
                            <span class="label">银行</span>
                            <span class="value">Maybank</span>
                        </div>
                        <div class="bank-info-row">
                            <span class="label">账号</span>
                            <span class="value" id="bank-account">004058673007</span>
                            <button class="copy-icon" onclick="copyBankAccount()">📋</button>
                        </div>
                        <div class="bank-info-row">
                            <span class="label">收款人</span>
                            <span class="value">Ng Jya Shen</span>
                        </div>
                        <div class="bank-info-row amount-row">
                            <span class="label">金额</span>
                            <span class="value highlight">RM 19.90</span>
                        </div>
                    </div>
                    <button class="btn-primary" onclick="goToStep(2)">我已转账，下一步 →</button>
                </div>

                <!-- Step 2: Upload Receipt -->
                <div id="payment-step2" class="payment-step hidden">
                    <div class="upload-section">
                        <h4>上传转账收据</h4>
                        <p class="upload-hint">请上传银行转账成功的截图</p>
                        <div class="upload-area" id="upload-area"
                            onclick="document.getElementById('receipt-input').click()">
                            <div class="upload-placeholder" id="upload-placeholder">
                                <span class="upload-icon">📷</span>
                                <span>点击上传收据截图</span>
                            </div>
                            <img id="receipt-preview" class="receipt-preview hidden" alt="Receipt preview">
                        </div>
                        <input type="file" id="receipt-input" accept="image/*" onchange="previewReceipt(event)" hidden>
                    </div>
                    <div class="step-buttons">
                        <button class="btn-secondary" onclick="goToStep(1)">← 返回</button>
                        <button class="btn-primary" id="verify-btn" onclick="verifyReceipt()" disabled>AI 验证收据</button>
                    </div>
                </div>

                <!-- Step 3: Verification -->
                <div id="payment-step3" class="payment-step hidden">
                    <div class="verification-status" id="verification-status">
                        <div class="verifying">
                            <div class="spinner"></div>
                            <h4>AI 正在验证收据...</h4>
                            <p>请稍候，这可能需要几秒钟</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Payment Processing Modal -->
        <div id="payment-processing" class="modal hidden">
            <div class="modal-overlay"></div>
            <div class="modal-content glass-card processing-modal">
                <div class="processing-icon">🔄</div>
                <h3>正在处理支付...</h3>
                <p>AI 正在验证您的收据</p>
                <div class="processing-spinner"></div>
            </div>
        </div>

        <!-- Payment Success Modal -->
        <div id="payment-success" class="modal hidden">
            <div class="modal-overlay" onclick="closePaymentSuccess()"></div>
            <div class="modal-content glass-card success-modal">
                <div class="success-icon">✅</div>
                <h3>验证成功!</h3>
                <p>您已成功升级为 Premium 会员</p>
                <button class="btn-primary" onclick="closePaymentSuccess()">开始使用</button>
            </div>
        </div>

        <!-- Payment Failed Modal -->
        <div id="payment-failed" class="modal hidden">
            <div class="modal-overlay" onclick="closePaymentFailed()"></div>
            <div class="modal-content glass-card failed-modal">
                <div class="failed-icon">❌</div>
                <h3>验证失败</h3>
                <p id="failed-reason">收据信息不符，请检查后重试</p>
                <button class="btn-primary" onclick="closePaymentFailed()">重新上传</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
        <p>AI 正在思考中...</p>
    </div>

    <!-- Toast Message -->
    <div id="toast" class="toast hidden"></div>

    <script src="mood-responses.js?v=20231219"></script>
    <script src="app.js?v=20231219"></script>
</body>

</html>